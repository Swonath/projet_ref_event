{% extends 'locataire/base_dashboard.html.twig' %}

{% block dashboard_content %}

<div class="page-header">
    <h1 class="page-title">Bonjour {{ locataire.nom }} ğŸ‘‹</h1>
    <p class="page-subtitle">Voici un aperÃ§u de votre activitÃ©</p>
</div>

<!-- Stats Cards -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-value">{{ stats.reservations_actives }}</div>
        <div class="stat-label">RÃ©servations actives</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">ğŸ’¬</div>
        <div class="stat-value">{{ stats.messages_non_lus }}</div>
        <div class="stat-label">Messages non lus</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">â¤ï¸</div>
        <div class="stat-value">{{ stats.favoris }}</div>
        <div class="stat-label">Emplacements favoris</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-value">{{ stats.depenses_mois }}â‚¬</div>
        <div class="stat-label">DÃ©penses ce mois</div>
    </div>
</div>

<!-- RÃ©servations en cours -->
<div class="section">
    <div class="section-header">
        <h2 class="section-title">Mes rÃ©servations en cours</h2>
        <a href="{{ path('locataire_reservations') }}" class="btn-link">Voir tout â†’</a>
    </div>
    
    <div class="tabs">
        <button class="tab active">En cours ({{ reservations|length }})</button>
        <button class="tab">Ã€ venir (1)</button>
        <button class="tab">PassÃ©es (3)</button>
    </div>
    
    {% if reservations is empty %}
        <div class="empty-state">
            <div class="empty-icon">ğŸ“…</div>
            <div class="empty-title">Aucune rÃ©servation en cours</div>
            <div class="empty-text">Vous n'avez pas encore de rÃ©servation active</div>
            <a href="#" class="btn-primary">Rechercher un emplacement</a>
        </div>
    {% else %}
        {% for reservation in reservations %}
        <div class="reservation-card">
            <div class="reservation-image">[Photo emplacement]</div>
            
            <div class="reservation-info">
                <h3>{{ reservation.emplacement }}</h3>
                <div class="reservation-details">
                    ğŸ“ {{ reservation.ville }} â€¢ {{ reservation.type }} â€¢ {{ reservation.surface }}
                </div>
                <div class="reservation-details">
                    ğŸ“… Du {{ reservation.date_debut|date('d/m/Y') }} au {{ reservation.date_fin|date('d/m/Y') }}
                </div>
                <span class="reservation-status status-{{ reservation.statut == 'En cours' ? 'confirmed' : 'pending' }}">
                    {{ reservation.statut }}
                </span>
            </div>
            
            <div class="reservation-actions">
                <div class="reservation-price">{{ reservation.prix_total }}â‚¬</div>
                <a href="#" class="btn-small btn-primary-small">Voir dÃ©tails</a>
                <a href="#" class="btn-small btn-secondary-small">Contacter</a>
            </div>
        </div>
        {% endfor %}
    {% endif %}
</div>

<!-- Messages rÃ©cents -->
<div class="section">
    <div class="section-header">
        <h2 class="section-title">Messages rÃ©cents</h2>
        <a href="#" class="btn-link">Voir tout â†’</a>
    </div>
    
    {% if messages is empty %}
        <div class="empty-state">
            <div class="empty-icon">ğŸ’¬</div>
            <div class="empty-title">Aucun message</div>
            <div class="empty-text">Vous n'avez pas encore de messages</div>
        </div>
    {% else %}
        {% for message in messages %}
        <div class="reservation-card" style="grid-template-columns: 1fr auto;">
            <div class="reservation-info">
                <h3>{{ message.expediteur }}</h3>
                <div class="reservation-details">{{ message.contenu }}</div>
                <div class="reservation-details">
                    ğŸ• {{ message.date|date('d/m/Y Ã  H:i') }}
                </div>
            </div>
            <div class="reservation-actions">
                <a href="#" class="btn-small btn-primary-small">RÃ©pondre</a>
            </div>
        </div>
        {% endfor %}
    {% endif %}
</div>

{% endblock %}
